<header class="mt-2">
  <div class="header-container-1">
    <h6 data-cy="faccrit">
      {{ (facCrit$ | async).name }} <span class="text-hint">{{ (interview$ | async)?.startDate | date: 'dd.MM.yyyy' }}</span>
    </h6>
    <div></div>
    <button hero (click)="onSave()" nbButton data-cy="save">speichern</button>
    <button hero status="primary" nbButton data-cy="finish">abschließen</button>
  </div>
  <div class="header-container-2 mt-2 subtitle-2">
    <span *ngFor="let person of (interview$ | async).contactPersons">
      {{ person.forename + ', ' + person.surname + ' | ' + person.role }}
    </span>
  </div>
</header>

<nb-card accent="primary" id="card-goal" class="mt-2">
  <nb-card-header data-cy="goals-card-header"><input [(ngModel)]="interviewGoal" placeholder="Ziel des Interviews..." nbInput fullWidth type="text" data-cy="goals-input" /></nb-card-header>
</nb-card>

<nb-accordion [id]="question.id" class="mt-2" *ngFor="let question of (facCrit$ | async).questions; let i = index">
  <nb-accordion-item expanded class="mb-2" data-cy="question-accordeon-item">
    <nb-accordion-item-header data-cy="question-card-header">{{ question.textDe }}</nb-accordion-item-header>
    <nb-accordion-item-body>
      <form [formGroup]="formGroups[i]" class="container-interview-form" data-cy="question-form">
        <div class="container-checkboxes">
          <nb-checkbox formControlName="result" data-cy="question-result">Ergebnis</nb-checkbox>
          <nb-checkbox formControlName="responsible" data-cy="question-responsible">Verantwortlicher</nb-checkbox>
          <nb-checkbox formControlName="documentation" data-cy="question-documentation">Dokumentation</nb-checkbox>
          <nb-checkbox formControlName="procedure" data-cy="question-strategy">Vorgehen</nb-checkbox>
        </div>
        <div class="container-inputs-item-1">
          <label class="label">Begründung</label>
          <textarea formControlName="reason" spellcheck="false" fullWidth nbInput data-cy="question-reason"></textarea>
        </div>
        <div class="container-inputs-item-2">
          <label class="label">Bemerkung</label>
          <textarea formControlName="annotation" spellcheck="false" fullWidth nbInput data-cy="question-note"></textarea>
        </div>
        <div class="container-inputs-item-3">
          <label class="label">Nachweis</label>
          <textarea formControlName="proof" spellcheck="false" fullWidth nbInput data-cy="question-certificate"></textarea>
        </div>
      </form>
    </nb-accordion-item-body>
  </nb-accordion-item>
</nb-accordion>
